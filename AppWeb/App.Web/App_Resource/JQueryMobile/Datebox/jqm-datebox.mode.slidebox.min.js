/*! SLIDEBOX Mode */
(function(a){a.extend(a.mobile.datebox.prototype.options,{themeDatePick:"b",themeDate:"a",useSetButton:true,validHours:false,slen:{y:9,m:14,d:16,h:16,i:30}});a.extend(a.mobile.datebox.prototype,{_sbox_pos:function(){var c,g,f,e,d,b=this;b.d.intHTML.find("div.ui-datebox-sliderow-int").each(function(){g=a(this);e=g.parent().outerWidth();c=g.outerWidth();if(b.__("isRTL")){f=g.find("div").last()}else{f=g.find("div").first()}d=g.find("div").size()*f.outerWidth();if(c>0){d=c}f.css("marginLeft",(d-e)/2*-1)})},_sbox_mktxt:{y:function(b){return["slideyear",this.theDate.get(0)+b]},m:function(c){var b=(this.theDate.copy([0],[0,0,1])).adj(1,c);return["slidemonth",this.__("monthsOfYearShort")[b.get(1)]]},d:function(c){var b=this.theDate.copy([0,0,c]);return["slideday",b.get(2)+"<br /><span class='ui-datebox-slidewday'>"+this.__("daysOfWeekShort")[b.getDay()]+"</span>"]},h:function(c){var b=this.theDate.copy([0,0,0,c]);return["slidehour",this.__("timeFormat")===12?this._formatter("%-I<span class='ui-datebox-slidewday'>%p</span>",b):b.get(3)]},i:function(b){return["slidemins",this._zPad((this.theDate.copy([0,0,0,0,b])).get(4))]}}});a.extend(a.mobile.datebox.prototype._build,{slidebox:function(){var f,l,q,d,e,n,p=this,c=this.options,h=this.drag,j="ui-datebox-",k=a("<div class='"+j+"sliderow-int'></div>"),m=a("<div>"),b=a("<div>",{"class":j+"slide"});if(typeof p.d.intHTML!=="boolean"){p.d.intHTML.remove().empty()}else{p.d.input.on("datebox",function(i,g){if(g.method==="postrefresh"){p._sbox_pos()}})}p.d.headerText=((p._grabLabel()!==false)?p._grabLabel():p.__("titleDateDialogLabel"));p.d.intHTML=a("<span class='"+j+"nopad'>");p.fldOrder=p.__("slideFieldOrder");p._check();p._minStepFix();a("<div class='"+j+"header'><h4>"+p._formatter(p.__("headerFormat"),p.theDate)+"</h4></div>").appendTo(p.d.intHTML);p.d.intHTML.append(b);for(l=0;l<p.fldOrder.length;l++){e=p.fldOrder[l];d=m.clone().addClass(j+"sliderow").data("rowtype",e);q=k.clone().data("rowtype",e).appendTo(d);if(p.__("isRTL")===true){q.css("direction","rtl")}if(typeof p._sbox_mktxt[e]==="function"){for(f=c.slen[e]*-1;f<(c.slen[e]+1);f++){n=p._sbox_mktxt[e].apply(p,[f]);a("<div>",{"class":j+"slidebox "+j+n[0]+" ui-btn ui-btn-"+((f===0)?c.themeDatePick:c.themeDate)}).html(n[1]).data("offset",f).appendTo(q)}d.appendTo(b)}}if(c.useSetButton||c.useClearButton){l=a("<div>",{"class":j+"controls "+j+"repad"});if(c.useSetButton){l.append(p._stdBtn.close.apply(p,[p.__("setDateButtonLabel")]))}if(c.useClearButton){l.append(p._stdBtn.clear.apply(p))}if(c.useCollapsedBut){l.controlgroup({type:"horizontal"});l.addClass("ui-datebox-collapse")}else{l.controlgroup()}l.appendTo(p.d.intHTML)}if(p.wheelExists){p.d.intHTML.on("mousewheel",".ui-datebox-sliderow-int",function(g,i){g.preventDefault();p._offset(a(this).data("rowtype"),((i<0)?-1:1)*(a(this).data("rowtype")==="i"?c.minuteStep:1))})}p.d.intHTML.on(c.clickEvent,".ui-datebox-sliderow-int>div",function(g){g.preventDefault();p._offset(a(this).parent().data("rowtype"),parseInt(a(this).data("offset"),10))});p.d.intHTML.on(h.eStart,".ui-datebox-sliderow-int",function(g){if(!h.move){h.move=true;h.target=a(this);h.pos=parseInt(h.target.css("marginLeft").replace(/px/i,""),10);h.start=p.touch?g.originalEvent.changedTouches[0].pageX:g.pageX;h.end=false;g.stopPropagation();g.preventDefault()}})}});a.extend(a.mobile.datebox.prototype._drag,{slidebox:function(){var b=this,d=this.options,c=this.drag;a(document).on(c.eMove,function(f){if(c.move&&d.mode==="slidebox"){c.end=b.touch?f.originalEvent.changedTouches[0].pageX:f.pageX;c.target.css("marginLeft",(c.pos+c.end-c.start)+"px");f.preventDefault();f.stopPropagation();return false}});a(document).on(c.eEnd,function(f){if(c.move&&d.mode==="slidebox"){c.move=false;if(c.end!==false){f.preventDefault();f.stopPropagation();c.tmp=c.target.find("div").first();b._offset(c.target.data("rowtype"),(b.__("isRTL")?-1:1)*(parseInt((c.start-c.end)/c.tmp.innerWidth(),10))*(c.target.data("rowtype")==="i"?d.minuteStep:1))}c.start=false;c.end=false}})}})})(jQuery);